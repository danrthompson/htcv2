shortcut={all_shortcuts:{},add:function(e,t,i){var n={type:"keydown",propagate:!1,disable_in_input:!1,target:document,keycode:!1};if(i)for(var s in n)"undefined"==typeof i[s]&&(i[s]=n[s]);else i=n;var a=i.target;"string"==typeof i.target&&(a=document.getElementById(i.target)),e=e.toLowerCase();var r=function(n){if(n=n||window.event,i.disable_in_input){var s;if(n.target?s=n.target:n.srcElement&&(s=n.srcElement),3==s.nodeType&&(s=s.parentNode),"INPUT"==s.tagName||"TEXTAREA"==s.tagName)return}n.keyCode?code=n.keyCode:n.which&&(code=n.which);var a=String.fromCharCode(code).toLowerCase();188==code&&(a=","),190==code&&(a=".");var r=e.split("+"),o=0,l={"`":"~",1:"!",2:"@",3:"#",4:"$",5:"%",6:"^",7:"&",8:"*",9:"(",0:")","-":"_","=":"+",";":":","'":'"',",":"<",".":">","/":"?","\\":"|"},c={esc:27,escape:27,tab:9,space:32,"return":13,enter:13,backspace:8,scrolllock:145,scroll_lock:145,scroll:145,capslock:20,caps_lock:20,caps:20,numlock:144,num_lock:144,num:144,pause:19,"break":19,insert:45,home:36,"delete":46,end:35,pageup:33,page_up:33,pu:33,pagedown:34,page_down:34,pd:34,left:37,up:38,right:39,down:40,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},h={shift:{wanted:!1,pressed:!1},ctrl:{wanted:!1,pressed:!1},alt:{wanted:!1,pressed:!1},meta:{wanted:!1,pressed:!1}};n.ctrlKey&&(h.ctrl.pressed=!0),n.shiftKey&&(h.shift.pressed=!0),n.altKey&&(h.alt.pressed=!0),n.metaKey&&(h.meta.pressed=!0);for(var u=0;k=r[u],u<r.length;u++)"ctrl"==k||"control"==k?(o++,h.ctrl.wanted=!0):"shift"==k?(o++,h.shift.wanted=!0):"alt"==k?(o++,h.alt.wanted=!0):"meta"==k?(o++,h.meta.wanted=!0):k.length>1?c[k]==code&&o++:i.keycode?i.keycode==code&&o++:a==k?o++:l[a]&&n.shiftKey&&(a=l[a],a==k&&o++);return o!=r.length||h.ctrl.pressed!=h.ctrl.wanted||h.shift.pressed!=h.shift.wanted||h.alt.pressed!=h.alt.wanted||h.meta.pressed!=h.meta.wanted||(t(n),i.propagate)?void 0:(n.cancelBubble=!0,n.returnValue=!1,n.stopPropagation&&(n.stopPropagation(),n.preventDefault()),!1)};this.all_shortcuts[e]={callback:r,target:a,event:i.type},a.addEventListener?a.addEventListener(i.type,r,!1):a.attachEvent?a.attachEvent("on"+i.type,r):a["on"+i.type]=r},remove:function(e){e=e.toLowerCase();var t=this.all_shortcuts[e];if(delete this.all_shortcuts[e],t){var i=t.event,n=t.target,s=t.callback;n.detachEvent?n.detachEvent("on"+i,s):n.removeEventListener?n.removeEventListener(i,s,!1):n["on"+i]=!1}}};