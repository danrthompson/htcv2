!function(){Spree.disableSaveOnClick=function(){return $("form.edit_order").submit(function(){return $(this).find(":submit, :image").attr("disabled",!0).removeClass("primary").addClass("disabled")})},Spree.Checkout={},Spree.ready(function(e){var t,i,n;return e("#checkout_form_address").is("*")&&(e("#checkout_form_address").validate(),i=function(t){return e("p#"+t+"country select").val()},n=function(n){var s;return s=i(n),null!=s?null==Spree.Checkout[s]?e.get(Spree.routes.states_search,{country_id:s},function(e){return Spree.Checkout[s]={states:e.states,states_required:e.states_required},t(Spree.Checkout[s],n)}):t(Spree.Checkout[s],n):void 0},t=function(t,i){var n,s,a,r,o,l,c,u;return c=t.states_required,l=t.states,a=e("p#"+i+"state"),r=a.find("select"),s=a.find("input"),o=a.find("state-required"),l.length>0?(n=parseInt(r.val()),r.html(""),u=[{name:"",id:""}].concat(l),e.each(u,function(t,i){var s;return s=e(document.createElement("option")).attr("value",i.id).html(i.name),n===i.id&&s.prop("selected",!0),r.append(s)}),r.prop("disabled",!1).show(),s.hide().prop("disabled",!0),a.show(),o.show(),c&&r.addClass("required"),s.removeClass("required")):(r.hide().prop("disabled",!0),s.show(),c?(o.show(),s.addClass("required")):(s.val(""),o.hide(),s.removeClass("required")),a.toggle(!!c),s.prop("disabled",!c),s.removeClass("hidden"),r.removeClass("required"))},e("p#bcountry select").change(function(){var t;return n("b"),e("input#order_use_billing").is(":checked")?(t=e("#bcountry select").val(),e("#scountry select").val(t).change()):void 0}),e("p#bstate input").change(function(){return e("input#order_use_billing").is(":checked")?e("#sstate input").val(e("#sstate input").val()):void 0}),e("p#bstate select").change(function(){return console.log("triggering right field"),e("input#order_use_billing").is(":checked")?e("p#sstate select").val(e("#bstate select").val()):void 0}),e("p#scountry select").change(function(){return n("s")}),n("b"),n("s"),e("input#order_use_billing").change(function(){return e(this).is(":checked")?(e("#shipping .inner").hide(),e("#shipping .inner input, #shipping .inner select").prop("disabled",!0)):(e("#shipping .inner").show(),e("#shipping .inner input, #shipping .inner select").prop("disabled",!1),n("s"))}).triggerHandler("change")),e("#checkout_form_payment").is("*")?(e('input[type="radio"][name="order[payments_attributes][][payment_method_id]"]').click(function(){return e("#payment-methods li").hide(),this.checked?e("#payment_method_"+this.value).show():void 0}),e(document).on("click","#cvv_link",function(t){var i,n;return i="cvv_info",n="left=20,top=20,width=500,height=500,toolbar=0,resizable=0,scrollbars=1",window.open(e(this).attr("href"),i,n),t.preventDefault()}),e('input[type="radio"]:checked').click()):void 0})}.call(this);